<form action="#" method="GET" class="search-form">
  <div class="row">
    <input  id="search" class="search-input" #inputBox type="search" placeholder="News topic" autocomplete="off">
    <label for="search" class="screen-reader-text">News topic</label>
    <button class="clear-button" #clearBtn><i [ngClass]="['fa-solid', 'fa-close']"></i></button>
  </div>

  <ng-container *ngIf="{
    results: searchResult$ | async,
    searchStatus: searchResponse$ | async,
    inputValue: inputValueTrimmed$ | async,
  } as data;">
    @if (data.searchStatus?.status === 'loading') {
    <!--display loading until we have suggestions-->
      <div class="progress-bar">
        <div class="progress-bar-value"></div>
      </div>
    } @else {
    <!--display suggestions-->
      <div class="result-box">
        <ul>
          @for (suggestion of data.results; track suggestion;
          let idx = $index) {
            <li
            [tabIndex]="idx"
            (click)="redirectBySelectedItem(idx, data.results || [])"
            #listItem
            >
              {{ suggestion }}
            </li>
          }
        </ul>
      </div>
    }
    @if (shouldDisplayNoResults(data.searchStatus, data.inputValue)) {
      <div class="no-results">
        <span>Nothing found ˙◠˙</span>
      </div>
    }
  </ng-container>

</form>
